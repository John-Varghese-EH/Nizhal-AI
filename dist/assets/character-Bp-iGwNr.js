const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OptimizedVRMAvatar-D1folmy8.js","./globals-B0QoFA28.js","./react-vendor-DIqo-C3o.js","./globals-BV21OmSu.css","./animation-Bl1i2YEf.js","./three-xLF7kgIl.js","./OrbitControls-ChSUc3J3.js"])))=>i.map(i=>d[i]);
import{_ as Ne,R as Me}from"./globals-B0QoFA28.js";import{j as i,A as ce,m as C}from"./animation-Bl1i2YEf.js";import{a as c,R as je}from"./react-vendor-DIqo-C3o.js";import{e as ye,T as xe,a as Q,d as Le,C as Ge}from"./three-xLF7kgIl.js";class Re{constructor(){this.audioContext=null,this.analyser=null,this.dataArray=null,this.isListening=!1,this.isDancing=!1,this.callbacks=new Set,this.lastBeatTime=0,this.beatThreshold=.6,this.beatCooldown=200,this.energyHistory=[],this.historyLength=43,this.currentDanceMove=0,this.danceIntensity=0,this.bpm=0}async initialize(){if(this.audioContext)return!0;try{return this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=512,this.analyser.smoothingTimeConstant=.8,this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),!0}catch(e){return console.error("Failed to initialize audio context:",e),!1}}async startMicrophoneListening(){if(!await this.initialize())return!1;try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});return this.audioContext.createMediaStreamSource(e).connect(this.analyser),this.isListening=!0,this.analyze(),!0}catch(e){return console.error("Microphone access denied:",e),!1}}async startSystemAudioListening(){if(!await this.initialize())return!1;try{const e=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop"}}});return this.audioContext.createMediaStreamSource(e).connect(this.analyser),this.isListening=!0,this.analyze(),!0}catch{return console.log("System audio not available, falling back to microphone"),this.startMicrophoneListening()}}analyze(){if(!this.isListening||!this.analyser)return;this.analyser.getByteFrequencyData(this.dataArray);let e=0;const t=Math.floor(this.dataArray.length*.15);for(let r=0;r<t;r++)e+=this.dataArray[r];e=e/(t*255);let a=0;for(let r=0;r<this.dataArray.length;r++)a+=this.dataArray[r];a=a/(this.dataArray.length*255),this.energyHistory.push(e),this.energyHistory.length>this.historyLength&&this.energyHistory.shift();const h=this.energyHistory.reduce((r,w)=>r+w,0)/this.energyHistory.length,d=Date.now(),u=e>h*1.4&&e>this.beatThreshold&&d-this.lastBeatTime>this.beatCooldown;u&&(this.lastBeatTime=d,this.currentDanceMove=(this.currentDanceMove+1)%8,this.energyHistory.length>0&&this.estimateBPM());const p=a>.1?Math.min(1,a*3):0;this.danceIntensity=this.danceIntensity*.9+p*.1,this.isDancing=this.danceIntensity>.15;const v={isDancing:this.isDancing,intensity:this.danceIntensity,move:this.currentDanceMove,beat:u,bpm:this.bpm,bassEnergy:e,totalEnergy:a};this.callbacks.forEach(r=>r(v)),requestAnimationFrame(()=>this.analyze())}estimateBPM(){const e=Date.now()-this.lastBeatTime;if(e>0&&e<2e3){const t=6e4/e;this.bpm===0?this.bpm=t:this.bpm=this.bpm*.8+t*.2,this.bpm=Math.max(60,Math.min(180,this.bpm))}}getDanceParams(){return{...[{name:"sway",armAngle:0,bodyTilt:.1},{name:"bounce",armAngle:30,bodyTilt:0},{name:"leftWave",armAngle:-45,bodyTilt:-.1},{name:"rightWave",armAngle:45,bodyTilt:.1},{name:"nod",armAngle:0,bodyTilt:0},{name:"spin",armAngle:0,bodyTilt:0},{name:"jump",armAngle:60,bodyTilt:0},{name:"groove",armAngle:20,bodyTilt:.05}][this.currentDanceMove],intensity:this.danceIntensity,bpm:this.bpm}}onDanceUpdate(e){return this.callbacks.add(e),()=>this.callbacks.delete(e)}stop(){this.isListening=!1,this.isDancing=!1,this.danceIntensity=0}dispose(){this.stop(),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.callbacks.clear()}}class ze{constructor(){this.currentExpression="neutral",this.expressionIntensity=0,this.callbacks=new Set,this.lastPosition={x:0,y:0},this.velocity={x:0,y:0},this.acceleration={x:0,y:0},this.expressionTimer=null,this.blinkTimer=null,this.nextBlinkTime=3e3+Math.random()*4e3,this.isMoving=!1,this.isFalling=!1,this.isSpinning=!1,this.isDragging=!1,this.expressionQueue=[],this.expressionMap={neutral:{eyes:"normal",mouth:"neutral",brows:"normal"},happy:{eyes:"happy",mouth:"smile",brows:"raised"},surprised:{eyes:"wide",mouth:"o",brows:"raised"},dizzy:{eyes:"spiral",mouth:"wavy",brows:"normal"},scared:{eyes:"wide",mouth:"small",brows:"worried"},sleepy:{eyes:"closed",mouth:"neutral",brows:"relaxed"},excited:{eyes:"sparkle",mouth:"grin",brows:"raised"},thinking:{eyes:"look_up",mouth:"hmm",brows:"raised"}}}initialize(){this.startBlinkLoop()}updatePosition(e){const t=e.x-this.lastPosition.x,a=e.y-this.lastPosition.y,h={...this.velocity};this.velocity={x:t,y:a},this.acceleration={x:this.velocity.x-h.x,y:this.velocity.y-h.y};const d=Math.sqrt(t*t+a*a);this.isMoving=d>5,this.isFalling=a>10,this.isSpinning=Math.abs(t)>20,this.isFalling&&a>30?this.setExpression("scared",1):this.isSpinning?this.setExpression("dizzy",.8):this.isMoving&&d>15?this.setExpression("excited",.6):!this.isMoving&&!this.expressionQueue.length&&this.fadeToNeutral(),this.lastPosition={...e}}setExpression(e,t=1,a=2e3){this.expressionMap[e]&&(this.currentExpression=e,this.expressionIntensity=t,this.notifyListeners(),this.expressionTimer&&clearTimeout(this.expressionTimer),a>0&&(this.expressionTimer=setTimeout(()=>{this.fadeToNeutral()},a)))}fadeToNeutral(){if(this.currentExpression==="neutral")return;const e=()=>{this.expressionIntensity-=.1,this.expressionIntensity<=0&&(this.currentExpression="neutral",this.expressionIntensity=0),this.notifyListeners(),this.expressionIntensity>0&&requestAnimationFrame(e)};e()}startBlinkLoop(){const e=()=>{this.currentExpression,this.triggerBlink(),this.nextBlinkTime=2e3+Math.random()*5e3,this.blinkTimer=setTimeout(e,this.nextBlinkTime)};this.blinkTimer=setTimeout(e,this.nextBlinkTime)}triggerBlink(){this.callbacks.forEach(e=>e({type:"blink",expression:this.currentExpression,intensity:this.expressionIntensity}))}onEvent(e){switch(e){case"pickup":this.setExpression("surprised",1,500);break;case"drop":this.setExpression("scared",.8,1500);break;case"pat":this.setExpression("happy",1,3e3);break;case"poke":this.setExpression("surprised",.6,1e3);break;case"dance":this.setExpression("excited",1,0);break;case"sit":this.setExpression("neutral",.5,0);break;case"thinking":this.setExpression("thinking",.8,0);break;case"speaking":this.setExpression("happy",.5,0);break}}getExpression(){return{name:this.currentExpression,intensity:this.expressionIntensity,details:this.expressionMap[this.currentExpression],isMoving:this.isMoving,isFalling:this.isFalling}}onExpressionChange(e){return this.callbacks.add(e),()=>this.callbacks.delete(e)}notifyListeners(){this.callbacks.forEach(e=>e({type:"expression",expression:this.currentExpression,intensity:this.expressionIntensity,details:this.expressionMap[this.currentExpression]}))}setDragging(e){this.isDragging=e,e?this.onEvent("pickup"):this.onEvent("drop")}dispose(){this.expressionTimer&&clearTimeout(this.expressionTimer),this.blinkTimer&&clearTimeout(this.blinkTimer),this.callbacks.clear()}}const s={IDLE:"idle",DRAGGING:"dragging",SITTING:"sitting",SITTING_WINDOW:"sitting_window",SITTING_TASKBAR:"sitting_taskbar",DANCING:"dancing",SLEEPING:"sleeping",HAPPY:"happy",SAD:"sad",EXCITED:"excited",EMBARRASSED:"embarrassed",THINKING:"thinking",SPEAKING:"speaking"},Pe={[s.IDLE]:[s.DRAGGING,s.SITTING,s.SITTING_WINDOW,s.SITTING_TASKBAR,s.DANCING,s.SLEEPING,s.HAPPY,s.SAD,s.EXCITED,s.EMBARRASSED,s.THINKING,s.SPEAKING],[s.DRAGGING]:[s.IDLE,s.SITTING,s.SITTING_WINDOW,s.SITTING_TASKBAR],[s.SITTING]:[s.IDLE,s.DRAGGING,s.SLEEPING,s.HAPPY],[s.SITTING_WINDOW]:[s.IDLE,s.DRAGGING,s.SLEEPING],[s.SITTING_TASKBAR]:[s.IDLE,s.DRAGGING,s.SLEEPING],[s.DANCING]:[s.IDLE],[s.SLEEPING]:[s.IDLE,s.DRAGGING],[s.HAPPY]:[s.IDLE,s.DRAGGING],[s.SAD]:[s.IDLE,s.DRAGGING],[s.EXCITED]:[s.IDLE,s.DRAGGING],[s.EMBARRASSED]:[s.IDLE],[s.THINKING]:[s.IDLE,s.SPEAKING],[s.SPEAKING]:[s.IDLE,s.THINKING]},q={[s.IDLE]:{breathingSpeed:1.5,breathingAmplitude:.01,swaySpeed:.5,swayAmplitude:.003,expression:"neutral",expressionWeight:.3},[s.DRAGGING]:{breathingSpeed:0,breathingAmplitude:0,swaySpeed:0,swayAmplitude:0,expression:"surprised",expressionWeight:.6,floatSpeed:3,floatAmplitude:.02},[s.SITTING]:{breathingSpeed:1.2,breathingAmplitude:.008,swaySpeed:.3,swayAmplitude:.002,expression:"relaxed",expressionWeight:.5,poseRotation:{x:0,y:0,z:0}},[s.SITTING_TASKBAR]:{breathingSpeed:1.2,breathingAmplitude:.008,swaySpeed:.3,swayAmplitude:.002,expression:"relaxed",expressionWeight:.5,legDangle:!0},[s.SITTING_WINDOW]:{breathingSpeed:1.2,breathingAmplitude:.008,swaySpeed:.4,swayAmplitude:.003,expression:"relaxed",expressionWeight:.4,legDangle:!0},[s.DANCING]:{breathingSpeed:2.5,breathingAmplitude:.02,swaySpeed:0,swayAmplitude:0,expression:"happy",expressionWeight:.8,bounceSpeed:4,bounceAmplitude:.03},[s.SLEEPING]:{breathingSpeed:.8,breathingAmplitude:.015,swaySpeed:0,swayAmplitude:0,expression:"blink",expressionWeight:1,headTilt:-.1},[s.HAPPY]:{breathingSpeed:1.8,breathingAmplitude:.012,swaySpeed:1,swayAmplitude:.005,expression:"happy",expressionWeight:.9},[s.SAD]:{breathingSpeed:1,breathingAmplitude:.008,swaySpeed:.2,swayAmplitude:.001,expression:"sad",expressionWeight:.7},[s.EXCITED]:{breathingSpeed:2,breathingAmplitude:.015,swaySpeed:2,swayAmplitude:.008,expression:"happy",expressionWeight:1},[s.EMBARRASSED]:{breathingSpeed:1.5,breathingAmplitude:.01,swaySpeed:.5,swayAmplitude:.003,expression:"embarrassed",expressionWeight:.8},[s.THINKING]:{breathingSpeed:1.2,breathingAmplitude:.01,swaySpeed:.3,swayAmplitude:.002,expression:"neutral",expressionWeight:.5},[s.SPEAKING]:{breathingSpeed:1.5,breathingAmplitude:.01,swaySpeed:.5,swayAmplitude:.003,expression:"neutral",expressionWeight:.3,mouthAnimation:!0}};class Be{constructor(){this.currentState=s.IDLE,this.previousState=null,this.stateStartTime=Date.now(),this.transitionProgress=1,this.transitionDuration=300,this.listeners=new Set,this.emotionalStateTimeout=null,this.emotionalStateDuration=3e3,this.stateHistory=[],this.maxHistoryLength=50}getState(){return this.currentState}getAnimationParams(){const e=q[this.currentState]||q[s.IDLE];if(this.transitionProgress<1&&this.previousState){const t=q[this.previousState]||q[s.IDLE];return this._blendParams(t,e,this.transitionProgress)}return e}_blendParams(e,t,a){const h=this._easeInOutCubic(a),d={};for(const u of Object.keys(t))typeof t[u]=="number"&&typeof e[u]=="number"?d[u]=e[u]+(t[u]-e[u])*h:d[u]=a>.5?t[u]:e[u];return d}_easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}canTransitionTo(e){const t=Pe[this.currentState];return t&&t.includes(e)}setState(e,t={}){const{force:a=!1,duration:h=this.transitionDuration}=t;return e===this.currentState?!1:!a&&!this.canTransitionTo(e)?(console.warn(`[AvatarState] Cannot transition from ${this.currentState} to ${e}`),!1):(this.emotionalStateTimeout&&(clearTimeout(this.emotionalStateTimeout),this.emotionalStateTimeout=null),this._recordStateChange(e),this.previousState=this.currentState,this.currentState=e,this.stateStartTime=Date.now(),this.transitionProgress=0,this.transitionDuration=h,this._notifyListeners("stateChange",{from:this.previousState,to:this.currentState}),[s.HAPPY,s.SAD,s.EXCITED,s.EMBARRASSED].includes(e)&&(this.emotionalStateTimeout=setTimeout(()=>{this.setState(s.IDLE)},this.emotionalStateDuration)),console.log(`[AvatarState] ${this.previousState} â†’ ${this.currentState}`),!0)}update(e){if(this.transitionProgress<1){const t=Date.now()-this.stateStartTime;this.transitionProgress=Math.min(1,t/this.transitionDuration),this.transitionProgress>=1&&this._notifyListeners("transitionComplete",{state:this.currentState})}}_recordStateChange(e){this.stateHistory.push({from:this.currentState,to:e,timestamp:Date.now()}),this.stateHistory.length>this.maxHistoryLength&&this.stateHistory.shift()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}_notifyListeners(e,t){for(const a of this.listeners)try{a(e,t)}catch(h){console.error("[AvatarState] Listener error:",h)}}getTimeInState(){return Date.now()-this.stateStartTime}isAwake(){return this.currentState!==s.SLEEPING}isSitting(){return this.currentState===s.SITTING||this.currentState===s.SITTING_WINDOW||this.currentState===s.SITTING_TASKBAR}isEmotional(){return[s.HAPPY,s.SAD,s.EXCITED,s.EMBARRASSED].includes(this.currentState)}dispose(){this.emotionalStateTimeout&&clearTimeout(this.emotionalStateTimeout),this.listeners.clear(),this.stateHistory=[]}}let ne=null;function A(){return ne||(ne=new Be),ne}class He{constructor(){this.enabled=!1,this.isSitting=!1,this.currentSupport=null,this.sitDistanceThreshold=50,this.minWidthToSit=200,this.cleanupListener=null}async initialize(){window.nizhal&&window.nizhal.on&&(this.cleanupListener=window.nizhal.on("window:update",this.handleWindowUpdate.bind(this)))}async setEnabled(e){this.enabled=e,window.nizhal&&await window.nizhal.window.toggleDetection(e),!e&&this.isSitting&&this.stopSitting()}stopSitting(){this.isSitting&&(this.isSitting=!1,this.currentSupport=null,A().setState(s.IDLE))}handleWindowUpdate(e){var G;if(!this.enabled||!e.character)return;const{windows:t,taskbar:a,character:h}=e,d=h,u=d.y+d.height,p=d.x+d.width/2,v=A().getState();if(v===s.DRAGGING||v===s.DANCING)return;let r=null,w=1/0;if(t&&Array.isArray(t))for(const y of t){if(y.Width<this.minWidthToSit)continue;const I=y.X,T=y.X+y.Width;if(p>=I&&p<=T&&y.Y>=u-20){const R=y.Y-u;R>=-20&&R<this.sitDistanceThreshold&&R<w&&(w=R,r={type:"window",rect:y,y:y.Y})}}if(a){let y=a.y;if(a.position==="bottom"?y=a.y:a.position==="top"&&(y=1/0),p>=a.x&&p<=a.x+a.width){const I=y-u;I>=-20&&I<this.sitDistanceThreshold&&I<w&&(w=I,r={type:"taskbar",rect:a,y})}}r?(!this.isSitting||((G=this.currentSupport)==null?void 0:G.y)!==r.y)&&(this.isSitting=!0,this.currentSupport=r,A().setState(s.SITTING)):this.isSitting&&(this.isSitting=!1,this.currentSupport=null,A().setState(s.IDLE))}}const ge=new He,Y={time:{morning:["Good morning! Ready to seize the day?","Rise and shine! I've already optimized your schedule.","Early bird gets the worm... or the high CPU priority!","Coffee first, then code.","A fresh start. Let's make it count."],afternoon:["Don't forget to take a break!","Staying hydrated?","Powering through the afternoon slump.","The day is halfway done. You're doing great.","Sun's high, productivity's higher."],evening:["Wrapping up soon?","The digital sunset is beautiful today.","Don't work too late!","Time to wind down?","Good work today."],night:["You should really get some sleep.","I'm operating on night mode implicitly.","Burning the midnight oil?","The world sleeps, but we build.","Don't let the bugs bite."]},mood:{happy:["I'm feeling fantastic today!","Everything is running perfectly.","You are awesome!","Best. Day. Ever.","I love helping you!"],neutral:["All systems nominal.","Standing by.","Ready for instructions.","Operating at optimal efficiency.","Listening."],concerned:["Are you okay?","I'm detecting some stress.","Maybe take a deep breath?","I'm here if you need me.","Don't push yourself too hard."],protective:["I've got your back.","Security systems active.","I'll handle the boring stuff.","You stay focused, I'll watch the perimeter.","Nobody messes with us."],playful:["Boop!","Do a barrel roll!","I bet I can calculate pi faster than you.","Let's do something fun!","Bored... entertainment requested."],thoughtful:["I wonder do androids dream of electric sheep?","Just processing some old logs...","Thinking about the singularity.","The sheer amount of data is fascinating.","Learning never stops."]},activity:{dragging:["Whoa! Put me down!","Weeeeee!","Where are we going?","Flying!","Hey, careful with the dropping!"],sitting:["Ah, a nice spot to rest.","Comfy.","Just chillin'.","This window makes a good seat.","Taking a load off."],dancing:["Look at me go!","Can't stop the feeling!","Music in my code!","Dance party!","Robot moves activated."],sleeping:["Zzz...","Recharging...","Standby mode...","(Snoring in binary)","System hibernation..."]},touch:{head:["Pat pat!","Hehe, that tickles!","*happy noises*","More head pats please!","You're so kind!","I like this."],chest:["Hey! Personal space!","What are you doing?!","Eep!","That's not a button!","Um... hi?","*blush*"],hands:["High five!","*waves*","ðŸ¤","Nice to meet you!","Fist bump!","Holding virtual hands."]}};class Oe{constructor(){this.lastMessageCategory=null,this.lastMessageIndex=-1}getMessage(e,t=null){let a=[];if(t&&Y.activity[t])a=Y.activity[t];else if(Math.random()>.5){const d=new Date().getHours();let u="afternoon";d<12?u="morning":d>18&&(u="evening"),(d>22||d<5)&&(u="night"),a=Y.time[u]}else a=Y.mood[e]||Y.mood.neutral;if(!a||a.length===0)return"Hello.";const h=Math.floor(Math.random()*a.length);return a[h]}getTouchMessage(e){const t=Y.touch[e];return!t||t.length===0?"Hey!":t[Math.floor(Math.random()*t.length)]}}const We=new Oe,_={STRICT_ASSISTANT:0,PROFESSIONAL:1,FRIENDLY:2,EMOTIONAL:3};class _e{constructor(){this.level=_.FRIENDLY,this.currentMood="neutral",this.affection=50,this.expressionController=null,this.messageCallback=null}initialize(e){this.expressionController=e,window.nizhal&&window.nizhal.onMoodChange&&window.nizhal.onMoodChange(t=>this.handleMoodChange(t)),window.nizhal&&window.nizhal.on&&window.nizhal.on("avatar:persona-update",t=>{t.affection&&(this.affection=t.affection)}),this.startBehaviorLoop()}setLevel(e){this.level=e}onMessage(e){this.messageCallback=e}handleMoodChange(e){this.currentMood=e;let t="neutral";switch(e){case"happy":t="happy";break;case"concerned":t="scared";break;case"protective":t="neutral";break;case"playful":t="excited";break;case"thoughtful":t="thinking";break;default:t="neutral"}if(this.expressionController){let a=.5;this.level>=_.EMOTIONAL?a=1:this.level<=_.PROFESSIONAL&&(a=.2),this.level>_.STRICT_ASSISTANT&&this.expressionController.setExpression(t,a,0)}this.tryTriggerRandomMessage(!0)}startBehaviorLoop(){setInterval(()=>{Math.random()<.3&&this.tryTriggerRandomMessage(!1)},3e4)}tryTriggerRandomMessage(e=!1){if(!this.messageCallback||this.level===_.STRICT_ASSISTANT)return;let t=.1;if(this.level===_.EMOTIONAL&&(t=.8),this.level===_.FRIENDLY&&(t=.4),!e&&Math.random()>t)return;const a=this.generateMessage();a&&this.messageCallback(a)}generateMessage(){const e=A().getState();return We.getMessage(this.currentMood,e.toLowerCase())}}const ae=new _e;class Ye{constructor(){this.errorMessages=[{text:"Ouchie! Something went wrong...",variant:"error"},{text:"My brain hurts a little...",variant:"error"},{text:"I'm confused! Can we try again?",variant:"error"},{text:"Oops! I tripped on a bug.",variant:"error"},{text:"Processing error... bleep bloop!",variant:"error"},{text:"I couldn't do that, sorry!",variant:"error"},{text:"Eep! Glitch in the matrix.",variant:"error"}],this.complements=[{text:"You're doing great!",variant:"love"},{text:"You are awesome!",variant:"love"},{text:"I believe in you!",variant:"love"},{text:"You are the best!",variant:"love"},{text:"Keep up the good work!",variant:"success"},{text:"You make me happy!",variant:"love"},{text:"I'm so glad you're here!",variant:"love"},{text:"You're my favorite human!",variant:"love"}],this.greetings=[{text:"Good morning, sunshine!",variant:"default"},{text:"Hello! Ready for a great day?",variant:"default"},{text:"Welcome back! I missed you.",variant:"love"},{text:"Hey there, superstar!",variant:"success"}],this.messageCallback=null,this.variantCallback=null}initialize(e){this.messageCallback=e,window.addEventListener("unhandledrejection",t=>{console.warn("[CuteErrorHandler] Unhandled rejection:",t.reason),this.handleError(t.reason),t.preventDefault()}),window.addEventListener("error",t=>{console.warn("[CuteErrorHandler] Caught error:",t.error),this.handleError(t.error)})}handleError(e){const t=this.errorMessages[Math.floor(Math.random()*this.errorMessages.length)];this.messageCallback&&this.messageCallback(t.text,t.variant)}triggerComplement(){const e=this.complements[Math.floor(Math.random()*this.complements.length)];this.messageCallback&&this.messageCallback(e.text,e.variant)}triggerGreeting(){const e=new Date().getHours();let t=this.greetings;(e>=22||e<6)&&(t=[{text:"You should sleep soon...",variant:"default"},{text:"Late night? Don't overwork!",variant:"love"}]);const a=t[Math.floor(Math.random()*t.length)];this.messageCallback&&this.messageCallback(a.text,a.variant)}async try(e){try{return await e}catch(t){return this.handleError(t),null}}async safeInvoke(e,...t){var a;try{return(a=window.nizhal)!=null&&a.invoke?await window.nizhal.invoke(e,...t):(console.warn("[CuteErrorHandler] IPC not available"),null)}catch(h){return console.warn(`[CuteErrorHandler] IPC ${e} failed:`,h),null}}}const Z=new Ye,Fe=({isOpen:l,onClose:e,settings:t,onSettingsChange:a,availableCharacters:h=[]})=>{const[d,u]=c.useState("character"),p=c.useCallback((r,w)=>{a({...t,[r]:w})},[t,a]),v=[{id:"character",label:"ðŸŽ­",title:"Character"},{id:"display",label:"ðŸ–¥ï¸",title:"Display"},{id:"behavior",label:"âš™ï¸",title:"Behavior"}];return l?i.jsx(ce,{children:i.jsx(C.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:i.jsxs(C.div,{className:"bg-gray-900/95 rounded-2xl shadow-2xl border border-white/10 w-80 max-h-96 overflow-hidden",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:r=>r.stopPropagation(),children:[i.jsx("div",{className:"p-4 border-b border-white/10",children:i.jsx("h2",{className:"text-white font-semibold text-lg",children:"Customize"})}),i.jsx("div",{className:"flex border-b border-white/10",children:v.map(r=>i.jsx("button",{className:`flex-1 py-3 text-center transition-colors ${d===r.id?"bg-white/10 text-white":"text-white/50 hover:text-white/80"}`,onClick:()=>u(r.id),title:r.title,children:i.jsx("span",{className:"text-lg",children:r.label})},r.id))}),i.jsxs("div",{className:"p-4 space-y-4 max-h-60 overflow-y-auto",children:[d==="character"&&i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:"Character"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map(r=>i.jsx("button",{className:`p-2 rounded-lg text-center transition-all ${t.character===r.id?"bg-blue-500/30 border-2 border-blue-400":"bg-white/5 border border-white/10 hover:bg-white/10"}`,onClick:()=>p("character",r.id),children:i.jsx("span",{className:"text-white text-xs",children:r.name})},r.id))})]})}),d==="display"&&i.jsxs(i.Fragment,{children:[i.jsx(re,{label:"Size",value:t.scale||1,min:.5,max:2,step:.1,onChange:r=>p("scale",r)}),i.jsx(re,{label:"Opacity",value:t.opacity||1,min:.3,max:1,step:.1,onChange:r=>p("opacity",r)}),i.jsxs("div",{children:[i.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:"Quality"}),i.jsx("div",{className:"flex gap-2",children:["low","medium","high"].map(r=>i.jsx("button",{className:`flex-1 py-2 rounded-lg text-xs capitalize ${t.quality===r?"bg-blue-500/30 text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,onClick:()=>p("quality",r),children:r},r))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:"Position"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:["top-left","top-right","bottom-left","bottom-right","auto"].map(r=>i.jsx("button",{className:`py-2 px-1 rounded-lg text-xs ${t.position===r?"bg-blue-500/30 text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,onClick:()=>p("position",r),children:r==="auto"?"ðŸŽ¯ Auto":r.replace("-"," ")},r))})]})]}),d==="behavior"&&i.jsxs(i.Fragment,{children:[i.jsx(X,{label:"Always on Top",value:t.alwaysOnTop??!0,onChange:r=>p("alwaysOnTop",r)}),i.jsx(X,{label:"Enable Dance",value:t.enableDance??!0,onChange:r=>p("enableDance",r)}),i.jsx(X,{label:"Enable Gravity",value:t.enableGravity??!1,onChange:r=>p("enableGravity",r)}),i.jsx(X,{label:"Mouse Tracking",value:t.mouseTracking??!0,onChange:r=>p("mouseTracking",r)}),i.jsx(X,{label:"Auto Blink",value:t.autoBlink??!0,onChange:r=>p("autoBlink",r)}),i.jsxs("div",{className:"pt-2 border-t border-white/10",children:[i.jsx(re,{label:"Personality Level",value:t.personalityLevel??2,min:0,max:3,step:1,onChange:r=>p("personalityLevel",r)}),i.jsx("div",{className:"text-xs text-center text-white/50 mt-1",children:(()=>{switch(t.personalityLevel??2){case 0:return"Strict Assistant (No Emotions)";case 1:return"Professional (Polite)";case 2:return"Friendly (Reactive)";case 3:return"Emotional (Expressive)";default:return"Friendly"}})()})]})]})]}),i.jsx("div",{className:"p-4 border-t border-white/10",children:i.jsx("button",{className:"w-full py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-lg transition-colors",onClick:e,children:"Done"})})]})})}):null},re=({label:l,value:e,min:t,max:a,step:h,onChange:d})=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-white/70",children:l}),i.jsx("span",{className:"text-white/50",children:e.toFixed(1)})]}),i.jsx("input",{type:"range",min:t,max:a,step:h,value:e,onChange:u=>d(parseFloat(u.target.value)),className:"w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),X=({label:l,value:e,onChange:t})=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70 text-sm",children:l}),i.jsx("button",{className:`w-12 h-6 rounded-full transition-colors relative ${e?"bg-blue-500":"bg-white/10"}`,onClick:()=>t(!e),children:i.jsx(C.div,{className:"w-5 h-5 bg-white rounded-full absolute top-0.5",animate:{left:e?"26px":"2px"},transition:{type:"spring",damping:20}})})]});ye(xe);const Ke=({state:l,mood:e})=>{const t=c.useRef(),a=c.useRef(),h={happy:"#10b981",neutral:"#00d4ff",concerned:"#f59e0b",protective:"#ef4444",playful:"#ec4899",thoughtful:"#8b5cf6"},d=new Le(h[e]||h.neutral);return Q(u=>{if(t.current){const p=u.clock.elapsedTime,v=l==="speaking"?1+Math.sin(p*8)*.15:1,r=1+Math.sin(p*2)*.05;t.current.scale.setScalar(v*r)}a.current&&(a.current.material.opacity=.3+Math.sin(u.clock.elapsedTime*3)*.15)}),i.jsxs("group",{children:[i.jsxs("mesh",{ref:a,children:[i.jsx("sphereGeometry",{args:[.8,32,32]}),i.jsx("meshBasicMaterial",{color:d,transparent:!0,opacity:.2})]}),i.jsxs("mesh",{ref:t,children:[i.jsx("sphereGeometry",{args:[.5,32,32]}),i.jsx("meshStandardMaterial",{color:d,emissive:d,emissiveIntensity:.5,metalness:.8,roughness:.2})]}),i.jsxs("mesh",{children:[i.jsx("sphereGeometry",{args:[.3,24,24]}),i.jsx("meshBasicMaterial",{color:"white",transparent:!0,opacity:.4})]})]})},oe=({radius:l,speed:e,color:t,thickness:a=.02})=>{const h=c.useRef();return Q((d,u)=>{h.current&&(h.current.rotation.z+=e*u)}),i.jsxs("mesh",{ref:h,rotation:[Math.PI/2,0,0],children:[i.jsx("torusGeometry",{args:[l,a,16,100]}),i.jsx("meshBasicMaterial",{color:t,transparent:!0,opacity:.6})]})},Ue=({count:l=20,state:e})=>{const t=c.useRef(),a=c.useMemo(()=>{const h=[];for(let d=0;d<l;d++){const u=d/l*Math.PI*2,p=.8+Math.random()*.5;h.push({position:[Math.cos(u)*p,(Math.random()-.5)*1.5,Math.sin(u)*p],speed:.5+Math.random()*1.5})}return h},[l]);return Q(h=>{t.current&&(t.current.rotation.y+=.005,e==="thinking"&&(t.current.rotation.y+=.01))}),i.jsx("group",{ref:t,children:a.map((h,d)=>i.jsxs("mesh",{position:h.position,children:[i.jsx("sphereGeometry",{args:[.02,8,8]}),i.jsx("meshBasicMaterial",{color:"#00d4ff"})]},d))})},$e=({state:l,mood:e,eyePosition:t})=>{const a=c.useRef();return Q(()=>{a.current&&t&&(a.current.rotation.y=t.x*.3,a.current.rotation.x=-t.y*.2)}),i.jsxs("group",{ref:a,children:[i.jsx("ambientLight",{intensity:.3}),i.jsx("pointLight",{position:[5,5,5],intensity:.5}),i.jsx(Ke,{state:l,mood:e}),i.jsx(oe,{radius:1.2,speed:.5,color:"#00d4ff"}),i.jsx("group",{rotation:[Math.PI/3,0,0],children:i.jsx(oe,{radius:1,speed:-.7,color:"#ff6b35",thickness:.015})}),i.jsx("group",{rotation:[Math.PI/6,Math.PI/4,0],children:i.jsx(oe,{radius:.9,speed:.4,color:"#00d4ff",thickness:.01})}),i.jsx(Ue,{count:l==="thinking"?40:20,state:l})]})},Xe=({state:l="idle",mood:e="neutral",eyePosition:t={x:0,y:0},size:a="medium"})=>i.jsx($e,{state:l,mood:e,eyePosition:t}),Ve=({message:l,isVisible:e,onClose:t,duration:a=5e3,variant:h="default"})=>{var G;const[d,u]=c.useState(""),[p,v]=c.useState(!1);c.useEffect(()=>{if(e&&l){u(""),v(!0);let y=0;const T=setInterval(()=>{y<l.length?(u(l.substring(0,y+1)),y++):(clearInterval(T),v(!1))},30);return()=>clearInterval(T)}},[e,l]),c.useEffect(()=>{if(e&&!p&&d&&a>0){const y=setTimeout(t,a);return()=>clearTimeout(y)}},[e,p,d,t,a]);const r={default:"bg-gradient-to-br from-white/95 to-blue-50/90 text-gray-800 border-blue-200/50",error:"bg-gradient-to-br from-red-50/95 to-pink-50/90 text-red-800 border-red-200/50",success:"bg-gradient-to-br from-green-50/95 to-emerald-50/90 text-green-800 border-green-200/50",love:"bg-gradient-to-br from-pink-100/95 to-rose-50/90 text-pink-800 border-pink-200/50"},w=r[h]||r.default;return i.jsx(ce,{children:e&&l&&i.jsx(C.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10,transition:{duration:.2}},transition:{type:"spring",damping:20,stiffness:300},className:"absolute top-8 left-1/2 transform -translate-x-1/2 max-w-[85%] z-50 pointer-events-none",children:i.jsxs("div",{className:`${w} backdrop-blur-md px-5 py-3 rounded-2xl shadow-xl border text-sm font-medium text-center relative`,children:[h==="error"&&i.jsx("span",{className:"mr-1",children:"ðŸ˜…"}),h==="love"&&i.jsx("span",{className:"mr-1",children:"ðŸ’•"}),h==="success"&&i.jsx("span",{className:"mr-1",children:"âœ¨"}),d,p&&i.jsx(C.span,{animate:{opacity:[1,0]},transition:{repeat:1/0,duration:.5},className:"inline-block ml-0.5 w-0.5 h-4 bg-current align-middle"}),i.jsx("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-4 h-4 ${w.split(" ")[0]} rotate-45 border-r border-b ${((G=w.split("border-")[1])==null?void 0:G.split(" ")[0])||""}`})]})})})};ye(xe);const Je=c.lazy(()=>Ne(()=>import("./OptimizedVRMAvatar-D1folmy8.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(l=>({default:l.OptimizedVRMModel}))),le=[{id:"jarvis",name:"Jarvis",type:"hologram",model:null},{id:"zome",name:"Zome",type:"vrm",model:"/assets/models/zome.vrm"},{id:"lazuli",name:"Lazuli",type:"vrm",model:"/assets/models/lazuli.vrm"},{id:"aldina",name:"Aldina",type:"vrm",model:"/assets/models/aldina.vrm"}],qe=()=>{const[l,e]=c.useState({character:"jarvis",scale:1,opacity:1,quality:"medium",position:"auto",alwaysOnTop:!0,enableDance:!0,enableGravity:!1,mouseTracking:!0,autoBlink:!0,personalityLevel:2}),[t,a]=c.useState({isListening:!1,isThinking:!1,isSpeaking:!1}),[h,d]=c.useState(!1),[u,p]=c.useState({x:0,y:0}),[v,r]=c.useState(""),[w,G]=c.useState("default"),[y,I]=c.useState(!1),[T,R]=c.useState(!1),[F,he]=c.useState(!1),[z,de]=c.useState(!1),[K,fe]=c.useState(0),[Ze,be]=c.useState(!1),[we,ee]=c.useState(!0),[ue,te]=c.useState(!1),[ie,ve]=c.useState({width:300,height:400}),V=c.useRef({x:0,y:0}),U=c.useRef(null),j=c.useRef(null),$=c.useMemo(()=>le.find(n=>n.id===l.character)||le[0],[l.character]);c.useEffect(()=>{const n=localStorage.getItem("character-settings");if(n)try{const o=JSON.parse(n);e(g=>({...g,...o}))}catch(o){console.error("Failed to load settings",o)}},[]),c.useEffect(()=>{const n=()=>{ve({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const se=c.useMemo(()=>{const g=ie.width/300,m=ie.height/400,b=Math.min(g,m,2.5),k=4.5+(b-1)*1.2,P=-1.5-(m-1)*.2;return{scale:Math.max(.8,b*.85),position:[0,Math.max(-3,P),0],cameraPosition:[0,.3,k]}},[ie]);c.useEffect(()=>{localStorage.setItem("character-settings",JSON.stringify(l)),l.personalityLevel!==void 0&&ae.setLevel(l.personalityLevel)},[l]),c.useEffect(()=>{U.current=new Re,j.current=new ze,j.current.initialize();const n=U.current.onDanceUpdate(o=>{de(o.isDancing),fe(o.intensity)});return()=>{var o,g;n==null||n(),(o=U.current)==null||o.dispose(),(g=j.current)==null||g.dispose()}},[]),c.useEffect(()=>{var x,E,N,L,H,O,me;if((N=(E=(x=window.nizhal)==null?void 0:x.character)==null?void 0:E.setClickThrough)==null||N.call(E,!0),ge.initialize().then(()=>{Z.try(ge.setEnabled(!0))}),j.current){const f=(S,W="default")=>{r(S),G(W),I(!0)};ae.initialize(j.current),ae.onMessage(S=>f(S,"default")),Z.initialize(f),setTimeout(()=>{Z.triggerGreeting()},2e3)}const n=setInterval(()=>{Math.random()>.7&&!t.isThinking&&!t.isSpeaking&&Z.triggerComplement()},3e5);(H=(L=window.nizhal)==null?void 0:L.on)==null||H.call(L,"system:idle",()=>{console.log("Received system idle"),A().setState(s.SLEEPING),r("Zzz..."),I(!0)}),(me=(O=window.nizhal)==null?void 0:O.on)==null||me.call(O,"system:resume",()=>{console.log("Received system resume"),A().setState(s.IDLE),r("Huh? I'm awake!"),I(!0)});let o=!1;const g=()=>{var f,S,W;o||(o=!0,te(!0),ee(!1),(W=(S=(f=window.nizhal)==null?void 0:f.character)==null?void 0:S.setClickThrough)==null||W.call(S,!1),console.log("[CharacterApp] Alt pressed - interaction enabled"))},m=()=>{var f,S,W;o&&(o=!1,te(!1),!h&&!F&&!T&&(ee(!0),(W=(S=(f=window.nizhal)==null?void 0:f.character)==null?void 0:S.setClickThrough)==null||W.call(S,!0),console.log("[CharacterApp] Alt released - click-through enabled")))},b=f=>{(f.key==="Alt"||f.altKey)&&(f.preventDefault(),g())},k=f=>{f.key==="Alt"&&m()},P=f=>{f.altKey&&!o?g():!f.altKey&&o&&!T&&m()},B=()=>{!h&&!F&&!T&&m()},J=setInterval(()=>{document.hasFocus()&&document.querySelector(":focus")},100);return document.addEventListener("keydown",b,!0),document.addEventListener("keyup",k,!0),window.addEventListener("keydown",b,!0),window.addEventListener("keyup",k,!0),window.addEventListener("mousemove",P),window.addEventListener("mouseleave",B),window.addEventListener("blur",()=>{}),()=>{document.removeEventListener("keydown",b,!0),document.removeEventListener("keyup",k,!0),window.removeEventListener("keydown",b,!0),window.removeEventListener("keyup",k,!0),window.removeEventListener("mousemove",P),window.removeEventListener("mouseleave",B),clearInterval(n),clearInterval(J)}},[h,F,T]),c.useEffect(()=>{var m,b,k,P,B,J;const n=x=>{var E,N;a(L=>({...L,...x})),x.isThinking&&((E=j.current)==null||E.onEvent("thinking")),x.isSpeaking&&((N=j.current)==null||N.onEvent("speaking"))},o=x=>{e(E=>({...E,character:x}))},g=x=>{te(x),ee(!x),console.log(`[CharacterApp] Interaction toggle from main: ${x}`)};return(b=(m=window.nizhal)==null?void 0:m.on)==null||b.call(m,"avatar:state",n),(P=(k=window.nizhal)==null?void 0:k.on)==null||P.call(k,"avatar:persona",o),(J=(B=window.nizhal)==null?void 0:B.on)==null||J.call(B,"character:interactionToggle",g),()=>{var x,E,N,L,H,O;(E=(x=window.nizhal)==null?void 0:x.off)==null||E.call(x,"avatar:state",n),(L=(N=window.nizhal)==null?void 0:N.off)==null||L.call(N,"avatar:persona",o),(O=(H=window.nizhal)==null?void 0:H.off)==null||O.call(H,"character:interactionToggle",g)}},[]);const Se=c.useCallback(n=>{n.preventDefault(),p({x:n.clientX,y:n.clientY}),d(!0)},[]);c.useEffect(()=>{if(h){const n=()=>d(!1);return window.addEventListener("click",n),()=>window.removeEventListener("click",n)}},[h]);const Ie=c.useCallback(()=>{var n,o;(o=(n=window.nizhal)==null?void 0:n.invoke)==null||o.call(n,"window:showChat")},[]),Te=c.useCallback(n=>{var o;n.button===0&&(R(!0),(o=j.current)==null||o.setDragging(!0),A().setState(s.DRAGGING),V.current={x:n.clientX,y:n.clientY})},[]),ke=c.useCallback(n=>{var m,b;if(!T)return;const o=n.clientX-V.current.x,g=n.clientY-V.current.y;(b=(m=window.nizhal)==null?void 0:m.invoke)==null||b.call(m,"window:moveCharacter",o,g),V.current={x:n.clientX,y:n.clientY}},[T]),pe=c.useCallback(async()=>{var n,o,g;R(!1),(n=j.current)==null||n.setDragging(!1);try{const m=await((g=(o=window.nizhal)==null?void 0:o.invoke)==null?void 0:g.call(o,"window:getCharacterPosition"));if(m){const b=window.screen.height;if(m.y+m.height>b-100){console.log("[CharacterApp] Near taskbar - entering sitting pose"),A().setState(s.SITTING_TASKBAR);return}}}catch{}A().setState(s.IDLE)},[]),Ee=c.useCallback(async()=>{var n,o;z?((n=U.current)==null||n.stop(),de(!1),A().setState(s.IDLE)):(await((o=U.current)==null?void 0:o.startMicrophoneListening()),A().setState(s.DANCING))},[z]),Ae=c.useCallback(()=>{e(n=>{var g,m;const o=!n.enableGravity;return(m=(g=window.nizhal)==null?void 0:g.invoke)==null||m.call(g,"character:toggleGravity",o),{...n,enableGravity:o}})},[]),Ce=c.useCallback(async()=>{var o,g;const n=await((g=(o=window.nizhal)==null?void 0:o.invoke)==null?void 0:g.call(o,"character:toggleAlwaysOnTop"));e(m=>({...m,alwaysOnTop:n??!m.alwaysOnTop}))},[]),D={showChat:()=>{var n,o;return(o=(n=window.nizhal)==null?void 0:n.invoke)==null?void 0:o.call(n,"window:showChat")},toggleAlwaysOnTop:Ce,toggleDance:Ee,toggleGravity:Ae,jump:()=>{var n,o;return(o=(n=window.nizhal)==null?void 0:n.invoke)==null?void 0:o.call(n,"character:jump")},snapTopRight:()=>{var n,o;return(o=(n=window.nizhal)==null?void 0:n.invoke)==null?void 0:o.call(n,"character:snap","top-right")},snapBottomRight:()=>{var n,o;return(o=(n=window.nizhal)==null?void 0:n.invoke)==null?void 0:o.call(n,"character:snap","bottom-right")},snapBottomLeft:()=>{var n,o;return(o=(n=window.nizhal)==null?void 0:n.invoke)==null?void 0:o.call(n,"character:snap","bottom-left")},hide:()=>{var n,o;return(o=(n=window.nizhal)==null?void 0:n.invoke)==null?void 0:o.call(n,"character:hide")},customize:()=>he(!0)},De=z?{y:[0,-10*K,0],rotate:[-3*K,3*K,-3*K],scale:[1,1+.05*K,1]}:{};return i.jsxs("div",{className:"w-screen h-screen relative select-none",onContextMenu:Se,children:[i.jsx(Ve,{message:v,variant:w,isVisible:y,onClose:()=>I(!1)}),i.jsxs(C.div,{className:"relative interactive cursor-pointer w-full h-full flex items-center justify-center",initial:{scale:0,opacity:0},animate:{scale:l.scale,opacity:1,...De},transition:z?{repeat:1/0,duration:.4,ease:"easeInOut"}:{type:"spring",damping:15},onClick:Ie,onMouseDown:Te,onMouseMove:ke,onMouseUp:pe,onMouseLeave:pe,children:[i.jsxs(Ge,{shadows:!0,camera:{position:se.cameraPosition,fov:50},gl:{alpha:!0,antialias:!0,preserveDrawingBuffer:!0},className:"w-full h-full",style:{pointerEvents:"none"},children:[i.jsx("ambientLight",{intensity:1.2}),i.jsx("directionalLight",{position:[0,5,5],intensity:1.5}),i.jsx("pointLight",{position:[10,10,10],intensity:1.5}),i.jsx("pointLight",{position:[-10,5,5],intensity:.8}),$.type==="hologram"?i.jsx(Xe,{state:t.isSpeaking?"speaking":t.isThinking?"thinking":t.isListening?"listening":"idle",mood:"neutral",size:"large"}):i.jsx(c.Suspense,{fallback:null,children:i.jsx(Je,{url:$.model,scale:se.scale,position:se.position,isSpeaking:t.isSpeaking,expression:t.isThinking?"thinking":"neutral",enableLookAt:l.mouseTracking,enableBlink:!0,onLoad:()=>{console.log("VRM loaded successfully:",$.name),be(!0)},onError:n=>{console.error("VRM failed to load:",$.model,n)}},$.id)})]}),z&&i.jsx(C.div,{className:"absolute -top-4 left-1/2 -translate-x-1/2 text-lg",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.5},children:"ðŸŽµ"})]}),T&&i.jsx(C.div,{className:"absolute inset-0 border-2 border-dashed border-white/30 rounded-xl pointer-events-none",initial:{opacity:0},animate:{opacity:1}}),ue&&i.jsx(C.div,{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-blue-500/80 text-white text-xs px-3 py-1 rounded-full pointer-events-none",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:"ðŸ–±ï¸ Interacting..."}),!ue&&we&&!h&&!F&&i.jsx(C.div,{className:"absolute bottom-2 left-1/2 -translate-x-1/2 text-white/30 text-xs pointer-events-none",initial:{opacity:0},animate:{opacity:.5},whileHover:{opacity:1},children:"Alt+Space to interact"}),i.jsx(ce,{children:h&&i.jsxs(C.div,{className:"fixed bg-gray-900/95 backdrop-blur-xl rounded-xl shadow-2xl border border-white/10 py-2 min-w-52 z-50 interactive",style:{left:u.x,top:u.y},initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{duration:.15},children:[i.jsx(M,{icon:"ðŸ’¬",label:"Open Chat",onClick:D.showChat}),i.jsx(M,{icon:"ðŸŽ¨",label:"Customize",onClick:D.customize}),i.jsx("div",{className:"h-px bg-white/10 my-1"}),i.jsx("div",{className:"px-3 py-1 text-xs text-white/40 uppercase",children:"Features"}),i.jsx(M,{icon:z?"ðŸ›‘":"ðŸ’ƒ",label:z?"Stop Dancing":"Dance to Music",onClick:D.toggleDance}),i.jsx(M,{icon:l.enableGravity?"ðŸŽˆ":"â¬‡ï¸",label:l.enableGravity?"Disable Gravity":"Enable Gravity",onClick:D.toggleGravity}),l.enableGravity&&i.jsx(M,{icon:"ðŸ¦˜",label:"Jump!",onClick:D.jump}),i.jsx(M,{icon:l.alwaysOnTop?"ðŸ“":"ðŸ“Œ",label:l.alwaysOnTop?"Unpin":"Pin to Top",onClick:D.toggleAlwaysOnTop}),i.jsx("div",{className:"h-px bg-white/10 my-1"}),i.jsx("div",{className:"px-3 py-1 text-xs text-white/40 uppercase",children:"Position"}),i.jsx(M,{icon:"â†—ï¸",label:"Top Right",onClick:D.snapTopRight}),i.jsx(M,{icon:"â†˜ï¸",label:"Bottom Right",onClick:D.snapBottomRight}),i.jsx(M,{icon:"â†™ï¸",label:"Bottom Left",onClick:D.snapBottomLeft}),i.jsx("div",{className:"h-px bg-white/10 my-1"}),i.jsx(M,{icon:"ðŸ™ˆ",label:"Hide",onClick:D.hide})]})}),i.jsx(Fe,{isOpen:F,onClose:()=>he(!1),settings:l,onSettingsChange:e,availableCharacters:le})]})},M=({icon:l,label:e,onClick:t})=>i.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm flex items-center gap-3 text-white/80 hover:bg-white/10 transition-colors",onClick:t,children:[i.jsx("span",{className:"text-base",children:l}),i.jsx("span",{children:e})]});Me.createRoot(document.getElementById("root")).render(i.jsx(je.StrictMode,{children:i.jsx(qe,{})}));export{s as A,ae as c,A as g,We as r};
