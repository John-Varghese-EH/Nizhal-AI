const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OptimizedVRMAvatar-Dki78BJc.js","./globals-_YYcdJxc.js","./react-vendor-DIqo-C3o.js","./globals-DqGqsghC.css","./animation-Bl1i2YEf.js","./three-CwDwxXp6.js","./OrbitControls-CFX3C8mP.js"])))=>i.map(i=>d[i]);
import{_ as W,R as Z}from"./globals-_YYcdJxc.js";import{j as e,m as b,A as F}from"./animation-Bl1i2YEf.js";import{a as l,R as K}from"./react-vendor-DIqo-C3o.js";import{C as ee,a as D,c as te}from"./three-CwDwxXp6.js";const se=({state:r,mood:t})=>{const i=l.useRef(),o=l.useRef(),h={happy:"#10b981",neutral:"#00d4ff",concerned:"#f59e0b",protective:"#ef4444",playful:"#ec4899",thoughtful:"#8b5cf6"},c=new te(h[t]||h.neutral);return D(d=>{if(i.current){const u=d.clock.elapsedTime,f=r==="speaking"?1+Math.sin(u*8)*.15:1,n=1+Math.sin(u*2)*.05;i.current.scale.setScalar(f*n)}o.current&&(o.current.material.opacity=.3+Math.sin(d.clock.elapsedTime*3)*.15)}),e.jsxs("group",{children:[e.jsxs("mesh",{ref:o,children:[e.jsx("sphereGeometry",{args:[.8,32,32]}),e.jsx("meshBasicMaterial",{color:c,transparent:!0,opacity:.2})]}),e.jsxs("mesh",{ref:i,children:[e.jsx("sphereGeometry",{args:[.5,32,32]}),e.jsx("meshStandardMaterial",{color:c,emissive:c,emissiveIntensity:.5,metalness:.8,roughness:.2})]}),e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[.3,24,24]}),e.jsx("meshBasicMaterial",{color:"white",transparent:!0,opacity:.4})]})]})},I=({radius:r,speed:t,color:i,thickness:o=.02})=>{const h=l.useRef();return D((c,d)=>{h.current&&(h.current.rotation.z+=t*d)}),e.jsxs("mesh",{ref:h,rotation:[Math.PI/2,0,0],children:[e.jsx("torusGeometry",{args:[r,o,16,100]}),e.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:.6})]})},ie=({count:r=20,state:t})=>{const i=l.useRef(),o=l.useMemo(()=>{const h=[];for(let c=0;c<r;c++){const d=c/r*Math.PI*2,u=.8+Math.random()*.5;h.push({position:[Math.cos(d)*u,(Math.random()-.5)*1.5,Math.sin(d)*u],speed:.5+Math.random()*1.5})}return h},[r]);return D(h=>{i.current&&(i.current.rotation.y+=.005,t==="thinking"&&(i.current.rotation.y+=.01))}),e.jsx("group",{ref:i,children:o.map((h,c)=>e.jsxs("mesh",{position:h.position,children:[e.jsx("sphereGeometry",{args:[.02,8,8]}),e.jsx("meshBasicMaterial",{color:"#00d4ff"})]},c))})},ne=({state:r,mood:t,eyePosition:i})=>{const o=l.useRef();return D(()=>{o.current&&i&&(o.current.rotation.y=i.x*.3,o.current.rotation.x=-i.y*.2)}),e.jsxs("group",{ref:o,children:[e.jsx("ambientLight",{intensity:.3}),e.jsx("pointLight",{position:[5,5,5],intensity:.5}),e.jsx(se,{state:r,mood:t}),e.jsx(I,{radius:1.2,speed:.5,color:"#00d4ff"}),e.jsx("group",{rotation:[Math.PI/3,0,0],children:e.jsx(I,{radius:1,speed:-.7,color:"#ff6b35",thickness:.015})}),e.jsx("group",{rotation:[Math.PI/6,Math.PI/4,0],children:e.jsx(I,{radius:.9,speed:.4,color:"#00d4ff",thickness:.01})}),e.jsx(ie,{count:r==="thinking"?40:20,state:r})]})},ae=({state:r="idle",mood:t="neutral",eyePosition:i={x:0,y:0},size:o="medium"})=>{const h={small:"w-24 h-24",medium:"w-40 h-40",large:"w-64 h-64"},c={idle:"#00d4ff",listening:"#10b981",thinking:"#8b5cf6",speaking:"#f59e0b"};return e.jsxs("div",{className:`relative ${h[o]}`,children:[e.jsx(b.div,{className:"absolute inset-0 rounded-full",style:{background:`radial-gradient(circle, ${c[r]}20 0%, transparent 70%)`,boxShadow:`0 0 60px ${c[r]}40`},animate:{scale:[1,1.1,1],opacity:[.6,.9,.6]},transition:{duration:2,repeat:1/0}}),e.jsx(ee,{camera:{position:[0,0,3.5],fov:50},style:{background:"transparent"},children:e.jsx(ne,{state:r,mood:t,eyePosition:i})}),r==="listening"&&e.jsx(e.Fragment,{children:[0,1,2].map(d=>e.jsx(b.div,{className:"absolute inset-0 rounded-full border border-cyan-400",initial:{scale:1,opacity:.5},animate:{scale:[1,1.5+d*.2],opacity:[.5,0]},transition:{duration:1.5,repeat:1/0,delay:d*.3}},d))}),e.jsx(b.div,{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 px-3 py-1 rounded-full text-xs font-mono bg-black/40 border border-cyan-500/30",style:{color:c[r]},children:r.toUpperCase()})]})};class re{constructor(){this.audioContext=null,this.analyser=null,this.dataArray=null,this.isListening=!1,this.isDancing=!1,this.callbacks=new Set,this.lastBeatTime=0,this.beatThreshold=.6,this.beatCooldown=200,this.energyHistory=[],this.historyLength=43,this.currentDanceMove=0,this.danceIntensity=0,this.bpm=0}async initialize(){if(this.audioContext)return!0;try{return this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=512,this.analyser.smoothingTimeConstant=.8,this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),!0}catch(t){return console.error("Failed to initialize audio context:",t),!1}}async startMicrophoneListening(){if(!await this.initialize())return!1;try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});return this.audioContext.createMediaStreamSource(t).connect(this.analyser),this.isListening=!0,this.analyze(),!0}catch(t){return console.error("Microphone access denied:",t),!1}}async startSystemAudioListening(){if(!await this.initialize())return!1;try{const t=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop"}}});return this.audioContext.createMediaStreamSource(t).connect(this.analyser),this.isListening=!0,this.analyze(),!0}catch{return console.log("System audio not available, falling back to microphone"),this.startMicrophoneListening()}}analyze(){if(!this.isListening||!this.analyser)return;this.analyser.getByteFrequencyData(this.dataArray);let t=0;const i=Math.floor(this.dataArray.length*.15);for(let n=0;n<i;n++)t+=this.dataArray[n];t=t/(i*255);let o=0;for(let n=0;n<this.dataArray.length;n++)o+=this.dataArray[n];o=o/(this.dataArray.length*255),this.energyHistory.push(t),this.energyHistory.length>this.historyLength&&this.energyHistory.shift();const h=this.energyHistory.reduce((n,M)=>n+M,0)/this.energyHistory.length,c=Date.now(),d=t>h*1.4&&t>this.beatThreshold&&c-this.lastBeatTime>this.beatCooldown;d&&(this.lastBeatTime=c,this.currentDanceMove=(this.currentDanceMove+1)%8,this.energyHistory.length>0&&this.estimateBPM());const u=o>.1?Math.min(1,o*3):0;this.danceIntensity=this.danceIntensity*.9+u*.1,this.isDancing=this.danceIntensity>.15;const f={isDancing:this.isDancing,intensity:this.danceIntensity,move:this.currentDanceMove,beat:d,bpm:this.bpm,bassEnergy:t,totalEnergy:o};this.callbacks.forEach(n=>n(f)),requestAnimationFrame(()=>this.analyze())}estimateBPM(){const t=Date.now()-this.lastBeatTime;if(t>0&&t<2e3){const i=6e4/t;this.bpm===0?this.bpm=i:this.bpm=this.bpm*.8+i*.2,this.bpm=Math.max(60,Math.min(180,this.bpm))}}getDanceParams(){return{...[{name:"sway",armAngle:0,bodyTilt:.1},{name:"bounce",armAngle:30,bodyTilt:0},{name:"leftWave",armAngle:-45,bodyTilt:-.1},{name:"rightWave",armAngle:45,bodyTilt:.1},{name:"nod",armAngle:0,bodyTilt:0},{name:"spin",armAngle:0,bodyTilt:0},{name:"jump",armAngle:60,bodyTilt:0},{name:"groove",armAngle:20,bodyTilt:.05}][this.currentDanceMove],intensity:this.danceIntensity,bpm:this.bpm}}onDanceUpdate(t){return this.callbacks.add(t),()=>this.callbacks.delete(t)}stop(){this.isListening=!1,this.isDancing=!1,this.danceIntensity=0}dispose(){this.stop(),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.callbacks.clear()}}class oe{constructor(){this.currentExpression="neutral",this.expressionIntensity=0,this.callbacks=new Set,this.lastPosition={x:0,y:0},this.velocity={x:0,y:0},this.acceleration={x:0,y:0},this.expressionTimer=null,this.blinkTimer=null,this.nextBlinkTime=3e3+Math.random()*4e3,this.isMoving=!1,this.isFalling=!1,this.isSpinning=!1,this.isDragging=!1,this.expressionQueue=[],this.expressionMap={neutral:{eyes:"normal",mouth:"neutral",brows:"normal"},happy:{eyes:"happy",mouth:"smile",brows:"raised"},surprised:{eyes:"wide",mouth:"o",brows:"raised"},dizzy:{eyes:"spiral",mouth:"wavy",brows:"normal"},scared:{eyes:"wide",mouth:"small",brows:"worried"},sleepy:{eyes:"closed",mouth:"neutral",brows:"relaxed"},excited:{eyes:"sparkle",mouth:"grin",brows:"raised"},thinking:{eyes:"look_up",mouth:"hmm",brows:"raised"}}}initialize(){this.startBlinkLoop()}updatePosition(t){const i=t.x-this.lastPosition.x,o=t.y-this.lastPosition.y,h={...this.velocity};this.velocity={x:i,y:o},this.acceleration={x:this.velocity.x-h.x,y:this.velocity.y-h.y};const c=Math.sqrt(i*i+o*o);this.isMoving=c>5,this.isFalling=o>10,this.isSpinning=Math.abs(i)>20,this.isFalling&&o>30?this.setExpression("scared",1):this.isSpinning?this.setExpression("dizzy",.8):this.isMoving&&c>15?this.setExpression("excited",.6):!this.isMoving&&!this.expressionQueue.length&&this.fadeToNeutral(),this.lastPosition={...t}}setExpression(t,i=1,o=2e3){this.expressionMap[t]&&(this.currentExpression=t,this.expressionIntensity=i,this.notifyListeners(),this.expressionTimer&&clearTimeout(this.expressionTimer),o>0&&(this.expressionTimer=setTimeout(()=>{this.fadeToNeutral()},o)))}fadeToNeutral(){if(this.currentExpression==="neutral")return;const t=()=>{this.expressionIntensity-=.1,this.expressionIntensity<=0&&(this.currentExpression="neutral",this.expressionIntensity=0),this.notifyListeners(),this.expressionIntensity>0&&requestAnimationFrame(t)};t()}startBlinkLoop(){const t=()=>{this.currentExpression,this.triggerBlink(),this.nextBlinkTime=2e3+Math.random()*5e3,this.blinkTimer=setTimeout(t,this.nextBlinkTime)};this.blinkTimer=setTimeout(t,this.nextBlinkTime)}triggerBlink(){this.callbacks.forEach(t=>t({type:"blink",expression:this.currentExpression,intensity:this.expressionIntensity}))}onEvent(t){switch(t){case"pickup":this.setExpression("surprised",1,500);break;case"drop":this.setExpression("scared",.8,1500);break;case"pat":this.setExpression("happy",1,3e3);break;case"poke":this.setExpression("surprised",.6,1e3);break;case"dance":this.setExpression("excited",1,0);break;case"sit":this.setExpression("neutral",.5,0);break;case"thinking":this.setExpression("thinking",.8,0);break;case"speaking":this.setExpression("happy",.5,0);break}}getExpression(){return{name:this.currentExpression,intensity:this.expressionIntensity,details:this.expressionMap[this.currentExpression],isMoving:this.isMoving,isFalling:this.isFalling}}onExpressionChange(t){return this.callbacks.add(t),()=>this.callbacks.delete(t)}notifyListeners(){this.callbacks.forEach(t=>t({type:"expression",expression:this.currentExpression,intensity:this.expressionIntensity,details:this.expressionMap[this.currentExpression]}))}setDragging(t){this.isDragging=t,t?this.onEvent("pickup"):this.onEvent("drop")}dispose(){this.expressionTimer&&clearTimeout(this.expressionTimer),this.blinkTimer&&clearTimeout(this.blinkTimer),this.callbacks.clear()}}const le=({isOpen:r,onClose:t,settings:i,onSettingsChange:o,availableCharacters:h=[]})=>{const[c,d]=l.useState("character"),u=l.useCallback((n,M)=>{o({...i,[n]:M})},[i,o]),f=[{id:"character",label:"ðŸŽ­",title:"Character"},{id:"display",label:"ðŸ–¥ï¸",title:"Display"},{id:"behavior",label:"âš™ï¸",title:"Behavior"}];return r?e.jsx(F,{children:e.jsx(b.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:e.jsxs(b.div,{className:"bg-gray-900/95 rounded-2xl shadow-2xl border border-white/10 w-80 max-h-96 overflow-hidden",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Customize"})}),e.jsx("div",{className:"flex border-b border-white/10",children:f.map(n=>e.jsx("button",{className:`flex-1 py-3 text-center transition-colors ${c===n.id?"bg-white/10 text-white":"text-white/50 hover:text-white/80"}`,onClick:()=>d(n.id),title:n.title,children:e.jsx("span",{className:"text-lg",children:n.label})},n.id))}),e.jsxs("div",{className:"p-4 space-y-4 max-h-60 overflow-y-auto",children:[c==="character"&&e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:"Character"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map(n=>e.jsx("button",{className:`p-2 rounded-lg text-center transition-all ${i.character===n.id?"bg-blue-500/30 border-2 border-blue-400":"bg-white/5 border border-white/10 hover:bg-white/10"}`,onClick:()=>u("character",n.id),children:e.jsx("span",{className:"text-white text-xs",children:n.name})},n.id))})]})}),c==="display"&&e.jsxs(e.Fragment,{children:[e.jsx(G,{label:"Size",value:i.scale||1,min:.5,max:2,step:.1,onChange:n=>u("scale",n)}),e.jsx(G,{label:"Opacity",value:i.opacity||1,min:.3,max:1,step:.1,onChange:n=>u("opacity",n)}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:"Quality"}),e.jsx("div",{className:"flex gap-2",children:["low","medium","high"].map(n=>e.jsx("button",{className:`flex-1 py-2 rounded-lg text-xs capitalize ${i.quality===n?"bg-blue-500/30 text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,onClick:()=>u("quality",n),children:n},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/70 text-sm mb-2 block",children:"Position"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["top-left","top-right","bottom-left","bottom-right","auto"].map(n=>e.jsx("button",{className:`py-2 px-1 rounded-lg text-xs ${i.position===n?"bg-blue-500/30 text-white":"bg-white/5 text-white/60 hover:bg-white/10"}`,onClick:()=>u("position",n),children:n==="auto"?"ðŸŽ¯ Auto":n.replace("-"," ")},n))})]})]}),c==="behavior"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{label:"Always on Top",value:i.alwaysOnTop??!0,onChange:n=>u("alwaysOnTop",n)}),e.jsx(z,{label:"Enable Dance",value:i.enableDance??!0,onChange:n=>u("enableDance",n)}),e.jsx(z,{label:"Enable Gravity",value:i.enableGravity??!1,onChange:n=>u("enableGravity",n)}),e.jsx(z,{label:"Mouse Tracking",value:i.mouseTracking??!0,onChange:n=>u("mouseTracking",n)}),e.jsx(z,{label:"Auto Blink",value:i.autoBlink??!0,onChange:n=>u("autoBlink",n)})]})]}),e.jsx("div",{className:"p-4 border-t border-white/10",children:e.jsx("button",{className:"w-full py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 rounded-lg transition-colors",onClick:t,children:"Done"})})]})})}):null},G=({label:r,value:t,min:i,max:o,step:h,onChange:c})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-white/70",children:r}),e.jsx("span",{className:"text-white/50",children:t.toFixed(1)})]}),e.jsx("input",{type:"range",min:i,max:o,step:h,value:t,onChange:d=>c(parseFloat(d.target.value)),className:"w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),z=({label:r,value:t,onChange:i})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white/70 text-sm",children:r}),e.jsx("button",{className:`w-12 h-6 rounded-full transition-colors relative ${t?"bg-blue-500":"bg-white/10"}`,onClick:()=>i(!t),children:e.jsx(b.div,{className:"w-5 h-5 bg-white rounded-full absolute top-0.5",animate:{left:t?"26px":"2px"},transition:{type:"spring",damping:20}})})]}),ce=l.lazy(()=>W(()=>import("./OptimizedVRMAvatar-Dki78BJc.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),B=[{id:"jarvis",name:"Jarvis",type:"hologram",model:null},{id:"zome",name:"Zome",type:"vrm",model:"/assets/models/zome.vrm"},{id:"lazuli",name:"Lazuli",type:"vrm",model:"/assets/models/lazuli.vrm"},{id:"aldina",name:"Aldina",type:"vrm",model:"/assets/models/aldina.vrm"}],he=()=>{const[r,t]=l.useState({character:"jarvis",scale:1,opacity:1,quality:"medium",position:"auto",alwaysOnTop:!0,enableDance:!0,enableGravity:!1,mouseTracking:!0,autoBlink:!0}),[i,o]=l.useState({isListening:!1,isThinking:!1,isSpeaking:!1}),[h,c]=l.useState(!1),[d,u]=l.useState({x:0,y:0}),[f,n]=l.useState(!1),[M,L]=l.useState(!1),[w,R]=l.useState(!1),[T,H]=l.useState(0),[de,_]=l.useState(!1),N=l.useRef({x:0,y:0}),E=l.useRef(null),v=l.useRef(null),A=l.useMemo(()=>B.find(s=>s.id===r.character)||B[0],[r.character]);l.useEffect(()=>{E.current=new re,v.current=new oe,v.current.initialize();const s=E.current.onDanceUpdate(a=>{R(a.isDancing),H(a.intensity)});return()=>{var a,p;s==null||s(),(a=E.current)==null||a.dispose(),(p=v.current)==null||p.dispose()}},[]),l.useEffect(()=>{var p,m,k,P;const s=y=>{var j,C;o(S=>({...S,...y})),y.isThinking&&((j=v.current)==null||j.onEvent("thinking")),y.isSpeaking&&((C=v.current)==null||C.onEvent("speaking"))},a=y=>{t(j=>({...j,character:y}))};return(m=(p=window.nizhal)==null?void 0:p.on)==null||m.call(p,"avatar:state",s),(P=(k=window.nizhal)==null?void 0:k.on)==null||P.call(k,"avatar:persona",a),()=>{var y,j,C,S;(j=(y=window.nizhal)==null?void 0:y.off)==null||j.call(y,"avatar:state",s),(S=(C=window.nizhal)==null?void 0:C.off)==null||S.call(C,"avatar:persona",a)}},[]);const U=l.useCallback(s=>{s.preventDefault(),u({x:s.clientX,y:s.clientY}),c(!0)},[]);l.useEffect(()=>{if(h){const s=()=>c(!1);return window.addEventListener("click",s),()=>window.removeEventListener("click",s)}},[h]);const $=l.useCallback(()=>{var s,a;(a=(s=window.nizhal)==null?void 0:s.invoke)==null||a.call(s,"window:showChat")},[]),q=l.useCallback(s=>{var a;s.button===0&&(n(!0),(a=v.current)==null||a.setDragging(!0),N.current={x:s.clientX,y:s.clientY})},[]),V=l.useCallback(s=>{var m,k;if(!f)return;const a=s.clientX-N.current.x,p=s.clientY-N.current.y;(k=(m=window.nizhal)==null?void 0:m.invoke)==null||k.call(m,"window:moveCharacter",a,p),N.current={x:s.clientX,y:s.clientY}},[f]),O=l.useCallback(()=>{var s;n(!1),(s=v.current)==null||s.setDragging(!1)},[]),X=l.useCallback(async()=>{var s,a;w?((s=E.current)==null||s.stop(),R(!1)):await((a=E.current)==null?void 0:a.startMicrophoneListening())},[w]),Y=l.useCallback(()=>{t(s=>{var p,m;const a=!s.enableGravity;return(m=(p=window.nizhal)==null?void 0:p.invoke)==null||m.call(p,"character:toggleGravity",a),{...s,enableGravity:a}})},[]),J=l.useCallback(async()=>{var a,p;const s=await((p=(a=window.nizhal)==null?void 0:a.invoke)==null?void 0:p.call(a,"character:toggleAlwaysOnTop"));t(m=>({...m,alwaysOnTop:s??!m.alwaysOnTop}))},[]),x={showChat:()=>{var s,a;return(a=(s=window.nizhal)==null?void 0:s.invoke)==null?void 0:a.call(s,"window:showChat")},toggleAlwaysOnTop:J,toggleDance:X,toggleGravity:Y,jump:()=>{var s,a;return(a=(s=window.nizhal)==null?void 0:s.invoke)==null?void 0:a.call(s,"character:jump")},snapTopRight:()=>{var s,a;return(a=(s=window.nizhal)==null?void 0:s.invoke)==null?void 0:a.call(s,"character:snap","top-right")},snapBottomRight:()=>{var s,a;return(a=(s=window.nizhal)==null?void 0:s.invoke)==null?void 0:a.call(s,"character:snap","bottom-right")},snapBottomLeft:()=>{var s,a;return(a=(s=window.nizhal)==null?void 0:s.invoke)==null?void 0:a.call(s,"character:snap","bottom-left")},hide:()=>{var s,a;return(a=(s=window.nizhal)==null?void 0:s.invoke)==null?void 0:a.call(s,"character:hide")},customize:()=>L(!0)},Q=w?{y:[0,-10*T,0],rotate:[-3*T,3*T,-3*T],scale:[1,1+.05*T,1]}:{};return e.jsxs("div",{className:"w-full h-full flex items-center justify-center relative select-none",style:{opacity:r.opacity},onContextMenu:U,onMouseDown:q,onMouseMove:V,onMouseUp:O,onMouseLeave:O,children:[e.jsxs(b.div,{className:"relative interactive cursor-pointer",initial:{scale:0,opacity:0},animate:{scale:r.scale,opacity:1,...Q},transition:w?{repeat:1/0,duration:.4,ease:"easeInOut"}:{type:"spring",damping:15},onClick:$,children:[A.type==="hologram"?e.jsx(ae,{state:i.isSpeaking?"speaking":i.isThinking?"thinking":i.isListening?"listening":"idle",mood:"neutral",size:"large"}):e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"w-48 h-64 flex items-center justify-center",children:e.jsxs("span",{className:"text-white animate-pulse",children:["Loading ",A.name,"..."]})}),children:e.jsx(ce,{modelUrl:A.model,size:{width:200,height:300},quality:r.quality,isSpeaking:i.isSpeaking,isThinking:i.isThinking,enableInteraction:r.mouseTracking,onLoad:()=>_(!0)})}),w&&e.jsx(b.div,{className:"absolute -top-4 left-1/2 -translate-x-1/2 text-lg",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.5},children:"ðŸŽµ"})]}),f&&e.jsx(b.div,{className:"absolute inset-0 border-2 border-dashed border-white/30 rounded-xl pointer-events-none",initial:{opacity:0},animate:{opacity:1}}),e.jsx(F,{children:h&&e.jsxs(b.div,{className:"fixed bg-gray-900/95 backdrop-blur-xl rounded-xl shadow-2xl border border-white/10 py-2 min-w-52 z-50 interactive",style:{left:d.x,top:d.y},initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{duration:.15},children:[e.jsx(g,{icon:"ðŸ’¬",label:"Open Chat",onClick:x.showChat}),e.jsx(g,{icon:"ðŸŽ¨",label:"Customize",onClick:x.customize}),e.jsx("div",{className:"h-px bg-white/10 my-1"}),e.jsx("div",{className:"px-3 py-1 text-xs text-white/40 uppercase",children:"Features"}),e.jsx(g,{icon:w?"ðŸ›‘":"ðŸ’ƒ",label:w?"Stop Dancing":"Dance to Music",onClick:x.toggleDance}),e.jsx(g,{icon:r.enableGravity?"ðŸŽˆ":"â¬‡ï¸",label:r.enableGravity?"Disable Gravity":"Enable Gravity",onClick:x.toggleGravity}),r.enableGravity&&e.jsx(g,{icon:"ðŸ¦˜",label:"Jump!",onClick:x.jump}),e.jsx(g,{icon:r.alwaysOnTop?"ðŸ“":"ðŸ“Œ",label:r.alwaysOnTop?"Unpin":"Pin to Top",onClick:x.toggleAlwaysOnTop}),e.jsx("div",{className:"h-px bg-white/10 my-1"}),e.jsx("div",{className:"px-3 py-1 text-xs text-white/40 uppercase",children:"Position"}),e.jsx(g,{icon:"â†—ï¸",label:"Top Right",onClick:x.snapTopRight}),e.jsx(g,{icon:"â†˜ï¸",label:"Bottom Right",onClick:x.snapBottomRight}),e.jsx(g,{icon:"â†™ï¸",label:"Bottom Left",onClick:x.snapBottomLeft}),e.jsx("div",{className:"h-px bg-white/10 my-1"}),e.jsx(g,{icon:"ðŸ™ˆ",label:"Hide",onClick:x.hide})]})}),e.jsx(le,{isOpen:M,onClose:()=>L(!1),settings:r,onSettingsChange:t,availableCharacters:B})]})},g=({icon:r,label:t,onClick:i})=>e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm flex items-center gap-3 text-white/80 hover:bg-white/10 transition-colors",onClick:i,children:[e.jsx("span",{className:"text-base",children:r}),e.jsx("span",{children:t})]});Z.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(he,{})}));
